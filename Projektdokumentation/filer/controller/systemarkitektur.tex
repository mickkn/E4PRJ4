\section{Systemarkitektur}

I dette afsnit beskrives systemarkitekturen for Controller.

\subsection{Hardware arkitektur}

\figur{1}{controller/sysark/Controller_IBD}{IBD diagram for Controller}{controller:ibd}

Controlleren består af 2 dele
\begin{description}
\item[Raspberry Pi] Linux baseret computer der styrer hele systemet. 
\item[Betjeningspanel] Panel med 3 lysdioder og 2 trykknapper til brugerinteraktion.
\end{description}

\subsection{Signal}

\begin{center}
\label{ctrl:signaltabel}
\begin{longtable}{|p{2,5cm}|p{1,8cm}|p{2,6cm}|p{2,8cm}|p{3cm}|}
\hline
\textbf{Signal-navn}	&\textbf{Type} 		&\textbf{Port 1} 	&\textbf{Port 2} 			&\textbf{Kommentar} \\ \hline
\endfirsthead
\multicolumn{5}{l}{...fortsat fra forrige side} \\ \hline 
\textbf{Signal-navn}	&\textbf{Type} 		&\textbf{Port 1} 	&\textbf{Port 2} 			&\textbf{Kommentar} \\ \hline
\endhead

%% Signal-navn
%% &Type
%% &Område
%% &Port1
%% &Port2
%% &Kommentar
%% \\\hline

manStartOn
&touch
&Betjeningspanel \newline (manStart\_in)
&Babypasser \newline (touch)
&Babypasser der laver et tryk på knappen
\\\hline

babyWatchOn
&touch
&Betjeningspanel \newline (onOff\_in)
&Babypasser \newline (touch)
&Babypasser der laver et tryk på knappen
\\\hline

power
&5 VDC
&RasberryPi \newline(micro\_USB) \newline
	Betjeningspanel \newline (pow\_in)
&Controller \newline(powC\_in)
&5 V forsyning til controller
\\\hline

powerOn			
&TTL 0-3,3 VDC	
&RasberryPi \newline (GPIO23)				
&Controller \newline (powOn\_out) 			
&Benyttes til at tænde og slukket for strømforsyningen   				\\\hline

I2C			
&Seriel		
&RasberryPi \newline (I2CRPI) \newline	
	GPIO2: SDA \newline	
	GPIO3: SCL \newline	
&Controller \newline (I2CController) 			
&Seriel kommunikation
\\\hline

USB		
&Seriel				
&RasberryPi \newline (USB\_in) 			
&Wi-Fi dongle \newline (USB\_out) \newline	
&Seriel kommunikation for Wi-Fi forbindelse
\\\hline

ledControl
&TTL 0-3,3 VDC		
&RaspberryPi \newline (GPIO14) \newline
 RaspberryPi \newline (GPIO15) \newline
 RaspberryPi \newline (GPIO18)
&Betjeningspanel \newline (onOffLed\_in) \newline
 Betjeningspanel \newline (manLed\_in) \newline
 Betjeningspanel \newline (wifiLed\_in)
&Logisk signal til at styre LED på Betjenningspanel
\\\hline

butPress
&TTL 0-3,3 VDC		
&RaspberryPi \newline (GPIO17) \newline
 RaspberryPi \newline (GPIO22)
&Betjeningspanel \newline (onOff\_out) \newline
 Betjeningspanel \newline (manStart\_out)
&Logisk signal til kontrol af knapper på betjeningspanel
\\\hline

\end{longtable}
\end{center}