%Modultest RecBuf
\subsection*{RecBuf}

\textbf{Formål} \\
Formålet er at teste klassen RecBufs håndtering af dens to buffere, herunder buffer-skift og korrekt dataindhold. For testens skyld og lettelse af eftervisning, indeholder denne udgave af bufferen typen \verb+int+ i stedet for \verb+fract32+.

\textbf{Opstilling til test af RecBuf test}

\begin{itemize}
	\item Blackfin 533 er sluttet til 230VAC
	\item Blackfin 533 er tilsuttet PC via COM-port
	\item CrossCore Embedded Studio (CCES) er kørende på PC
\end{itemize}

\textbf{Testprocedure}
\begin{enumerate}
	\item Først initieres rb\_mem0 og rb\_mem1 med 3 pladser  
	\item For nemmere at kunne teste RecBuf, testes der med ints i stedet for fracts
	\item Testkoden eksekveres. Koden kan ses herunder. 
	\item Kommandoprompten aflæses for at se om værdierne passer med det forventede
\end{enumerate}

\begin{verbatim}
int main(void)
{
     rb_mem0[3]
     rb_mem1[3]
     
     
     int i = 0;
     for(i = 0; i<6; i++)
     {
          storeData(i);
     }
     
     printf("Content of mem0_ is\n");
     
     for(i = 0; i<3; i++)
     {
          printf("Index %d is: %d", i, rb_mem0[i]);
     }
     
     printf("Content of mem1_ is\n");
     
     for(i = 0; i<3; i++)
     {
          printf("Index %d is: %d", i, rb_mem1[i]);
     }


     for(i = 0; i<6; i++)
     {
          storeData(i+10);
     }
     
     .... samme printfunktion som før      
\end{verbatim}

\textbf{Forventet resultat} \\
Det forventede resultat af første udskrift kan ses i Tabel \ref{IL:modultest:values1}:

\begin{table}[H]
	\caption{Forventede værdier }
\begin{center}
    \begin{tabular}{ | l | l | l | l |}
    \hline 
    \textbf{Buffer} 	& \textbf{index 0}  &\textbf{index 1}	&\textbf{index 2}  	\\ \hline
     mem0\_	 	& 0   				& 1				& 2			\\ \hline
     mem1\_ 	& 3  				& 4 			& 5				\\ \hline
    \end{tabular}
\end{center}
	\label{IL:modultest:values1}
\end{table}

Det forventede resultat af anden udskrift kan ses i Tabel \ref{IL:modultest:values2}:

\begin{table}[H]
	\caption{Forventede værdier }
\begin{center}
    \begin{tabular}{ | l | l | l | l |}
    \hline 
    \textbf{Buffer} 	& \textbf{index 0}  &\textbf{index 1}	&\textbf{index 2}  	\\ \hline
     mem0\_	 	& 10   				& 11				& 12			\\ \hline
     mem1\_ 	& 13  				& 14 			& 15				\\ \hline
    \end{tabular}
\end{center}
	\label{IL:modultest:values2}
\end{table}

\textbf{Resultat} \\


På Figur \ref{FirstRecBufTest} ses den først udskrift, det ses ligeledes at det stemmer overens med de forventede værdier.

\figur{0.3}{intlydmonitor/modultest/First_output}{Første udskrift i kommandoprompten}{FirstRecBufTest}

På Figur \ref{SecondRecBufTest} ses den anden udskrift, det ses ligeledes at det stemmer overens med de forventede værdier.  

\figur{0.3}{intlydmonitor/modultest/Second_output}{Første udskrift i kommandoprompten}{SecondRecBufTest}


\textit{Testen er godkendt}




